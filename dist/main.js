!function(){"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}(function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);var o=function(){return t=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selector=t,this._name=n,this._link=r},(r=[{key:"_generateTemplate",value:function(){var e=document.querySelector(this._selector).content;this._cardElement=e.querySelector(".elements__element").cloneNode(!0)}},{key:"addCard",value:function(){this._generateTemplate(),this._cardElement.querySelector(".element__name").textContent=this._name,this._cardElement.querySelector(".element__img").src=this._link,this._setEventListetener(),e.cardsContainer.prepend(this._cardElement)}},{key:"_like",value:function(){this._cardElement.querySelector(".element__like").addEventListener("click",(function(e){e.target.classList.toggle("element__like_active")}))}},{key:"_remove",value:function(){var e=this;this._cardElement.querySelector(".element__remove").addEventListener("click",(function(){e._cardElement.remove()}))}},{key:"_imagePopup",value:function(){var t=this;this._cardElement.querySelector(".element__img").addEventListener("click",(function(){e.imageModal.showModal(),e.imageModal.querySelector(".popup__image-render").src=t._link,e.imageModal.querySelector(".popup__image-name").textContent=t._name}))}},{key:"_setEventListetener",value:function(){this._imagePopup(),this._like(),this._remove()}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var u=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=t,this._formConfig=n},(t=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._formConfig.inputErrorClass),n.textContent=t,n.classList.add(this._formConfig.errorClass)}},{key:"_hideInputError",value:function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._formConfig.inputErrorClass),n.classList.remove(this._formConfig.errorClass),n.textContent=""}},{key:"_checkInputValidity",value:function(e,t,n){t.validity.valid?this._hideInputError(e,t,n):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t,n){this._hasInvalidInput(e)?(t.classList.add(n.inactiveButtonClass),t.disabled=!0):(t.classList.remove(n.inactiveButtonClass),t.disabled=!1)}},{key:"_setEventListeners",value:function(e,t){var n=this,r=Array.from(e.querySelectorAll(this._formConfig.inputSelector)),o=e.querySelector(this._formConfig.submitButtonSelector);this._toggleButtonState(r,o,t),r.forEach((function(i){i.addEventListener("input",(function(){n._checkInputValidity(e,i,t),n._toggleButtonState(r,o,t)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._formElement,this._formConfig)}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();cardModalSave.addEventListener("click",(function(){var e=document.querySelector("#title"),t=document.querySelector("#url");new o("#card-template",e.value,t.value).addCard(),e.value="",t.value="",handleModalClose()})),e.initialCards.forEach((function(e){new o("#card-template",e.name,e.link).addCard()}));var c=new u(profileModalForm,e.formConfig);new u(cardModalForm,e.formConfig).enableValidation(),c.enableValidation(),console.log("Hello, World!")}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3ZCLGlCQUNBb0UsRUFBVXJFLE1BQ1ZzRSxFQUFRdEUsT0FFR3VFLFVBRWJGLEVBQVVyRSxNQUFRLEdBQ2xCc0UsRUFBUXRFLE1BQVEsR0FDaEJ3RSxrQkFDRixJQUVBQyxFQUFBQSxhQUFBQSxTQUFxQixTQUFVQyxHQUNSLElBQUl6RSxFQUFLLGlCQUFrQnlFLEVBQUt2RSxLQUFNdUUsRUFBS3RFLE1BQ25EbUUsU0FDZixJQUVBLElBQU1JLEVBQW1CLElBQUl6QyxFQUFjMEMsaUJBQWtCeEMsRUFBQUEsWUFFdkMsSUFBSUYsRUFBYzJDLGNBQWV6QyxFQUFBQSxZQUV6QzBDLG1CQUNkSCxFQUFpQkcsbUJBR2pCQyxRQUFRQyxJQUFJLGdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NjcHJpdHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zY3ByaXRzL0Zvcm12YWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IGNhcmRzQ29udGFpbmVyLCBpbWFnZU1vZGFsIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICB9XG5cbiAgX2dlbmVyYXRlVGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcikuY29udGVudDtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2VsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBhZGRDYXJkKCkge1xuICAgIHRoaXMuX2dlbmVyYXRlVGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX25hbWVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1nXCIpLnNyYyA9IHRoaXMuX2xpbms7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RldGVuZXIoKTtcbiAgICBjYXJkc0NvbnRhaW5lci5wcmVwZW5kKHRoaXMuX2NhcmRFbGVtZW50KTtcbiAgfVxuICBfbGlrZSgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2xpa2VfYWN0aXZlXCIpO1xuICAgICAgfSk7XG4gIH1cbiAgX3JlbW92ZSgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fcmVtb3ZlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9pbWFnZVBvcHVwKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWdcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBpbWFnZU1vZGFsLnNob3dNb2RhbCgpO1xuICAgICAgICBpbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXJlbmRlclwiKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgICAgICBpbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLW5hbWVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgICAgfSk7XG4gIH1cbiAgX3NldEV2ZW50TGlzdGV0ZW5lcigpIHtcbiAgICB0aGlzLl9pbWFnZVBvcHVwKCk7XG4gICAgdGhpcy5fbGlrZSgpO1xuICAgIHRoaXMuX3JlbW92ZSgpO1xuICB9XG59XG4iLCIvL3ZhbGlkYWNpb25cbmV4cG9ydCBjbGFzcyBGb3JtdmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoZm9ybUVsZW1lbnQsIGZvcm1Db25maWcpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2Zvcm1Db25maWcgPSBmb3JtQ29uZmlnO1xuICB9XG5cbiAgLy9hY3RpdmEgeSBkZXNhY3RpdmEgbGEgY2xhc2UgZXJyb3IgZW4gbG9zIGVsZW1lbnRvc1xuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtQ29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Zvcm1Db25maWcuZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9mb3JtQ29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZm9ybUNvbmZpZy5lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG4gIC8vY2hlcXVlYSBsYSB2YWxpZGV6IGRlbCBmb3JtIHkgbWFuZGEgYSBlamVjdXRhciAoc2hvd0lucHV0RXJyb3IgfHwgaGlkZUlucHV0RXJyb3IpIHNlZ3VuIGNvcnJlc3BvbmRhXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZm9ybUNvbmZpZykge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGZvcm1Db25maWcpO1xuICAgIH1cbiAgfVxuICAvL2NvbXBydWV2YSBzaSBhbGd1biBpbnB1dCB0aWVuZSBhbGd1biB2YWxvciBpbmNvcnJlY3RvXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgLy9zb21lIGRldnVsZXZlIHRydWUgbyBmbGFzZVxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuICAvL2ludGVyY2FtYmlhIGVsIGVzdGFkbyBkZWwgYm90b24gYWN0aXZvIHkgZGVzYWN0aXZvIGRlcGVuZGllbmRvIGRlIGxhIHZhbGlkZXogZGUgbG9zIGlucHV0c1xuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBmb3JtQ29uZmlnKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoZm9ybUNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZm9ybUNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIGZvcm1Db25maWcpIHtcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3JtQ29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX2Zvcm1Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBmb3JtQ29uZmlnKTtcbiAgICAvL2l0ZXJhIHBvciBlbCBhcnJheSBkZSBpbnB1dHMgY2hlcXVlYW5kbyBzdSB2YWxpZGV6IHBhcmEgYXNpIGFjdGl2YXIgZWwgYm90b24gc2kgZXMgdmFsaWRvXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBmb3JtQ29uZmlnKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBmb3JtQ29uZmlnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5fZm9ybUVsZW1lbnQsIHRoaXMuX2Zvcm1Db25maWcpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL3NjcHJpdHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBmb3JtQ29uZmlnIH0gZnJvbSBcIi4uL3NjcHJpdHMvdXRpbHMuanNcIjtcbmltcG9ydCB7IEZvcm12YWxpZGF0b3IgfSBmcm9tIFwiLi4vc2Nwcml0cy9Gb3JtdmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgXCIuL3N0eWxlcy9pbmRleC5jc3NcIjtcblxuLy9ub21icmUgeSBzcmMgZGUgbGEgbnVldmEgdGFyamV0YVxuY2FyZE1vZGFsU2F2ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBsZXQgY2FyZFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aXRsZVwiKTtcbiAgbGV0IGNhcmRVcmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3VybFwiKTtcbiAgY29uc3QgZGVmYXVsdENhcmRzID0gbmV3IENhcmQoXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIGNhcmRUaXRsZS52YWx1ZSxcbiAgICBjYXJkVXJsLnZhbHVlXG4gICk7XG4gIGRlZmF1bHRDYXJkcy5hZGRDYXJkKCk7XG5cbiAgY2FyZFRpdGxlLnZhbHVlID0gXCJcIjtcbiAgY2FyZFVybC52YWx1ZSA9IFwiXCI7XG4gIGhhbmRsZU1vZGFsQ2xvc2UoKTtcbn0pO1xuXG5pbml0aWFsQ2FyZHMuZm9yRWFjaChmdW5jdGlvbiAoY2FyZCkge1xuICBjb25zdCBkZWZhdWx0Q2FyZHMgPSBuZXcgQ2FyZChcIiNjYXJkLXRlbXBsYXRlXCIsIGNhcmQubmFtZSwgY2FyZC5saW5rKTtcbiAgZGVmYXVsdENhcmRzLmFkZENhcmQoKTtcbn0pO1xuXG5jb25zdCB2YWxpZFByb2ZpbGVGb3JtID0gbmV3IEZvcm12YWxpZGF0b3IocHJvZmlsZU1vZGFsRm9ybSwgZm9ybUNvbmZpZyk7XG5cbmNvbnN0IHZhbGlkQ2FyZEZvcm0gPSBuZXcgRm9ybXZhbGlkYXRvcihjYXJkTW9kYWxGb3JtLCBmb3JtQ29uZmlnKTtcblxudmFsaWRDYXJkRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XG52YWxpZFByb2ZpbGVGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcbmxldCBzb21lU3RyID0gXCJQcm9ncmFtw6kuIEd1YXJkw6kuIEVtcGFxdWV0w6kuXCI7XG5cbmNvbnNvbGUubG9nKFwiSGVsbG8sIFdvcmxkIVwiKTtcbiJdLCJuYW1lcyI6WyJleHBvcnRzIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiQ2FyZCIsInNlbGVjdG9yIiwibmFtZSIsImxpbmsiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX3NlbGVjdG9yIiwiX25hbWUiLCJfbGluayIsImtleSIsImNhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJfY2FyZEVsZW1lbnQiLCJjbG9uZU5vZGUiLCJfZ2VuZXJhdGVUZW1wbGF0ZSIsInRleHRDb250ZW50Iiwic3JjIiwiX3NldEV2ZW50TGlzdGV0ZW5lciIsImNhcmRzQ29udGFpbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl90aGlzIiwicmVtb3ZlIiwiX3RoaXMyIiwiaW1hZ2VNb2RhbCIsIl9pbWFnZVBvcHVwIiwiX2xpa2UiLCJfcmVtb3ZlIiwiRm9ybXZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiZm9ybUNvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9mb3JtQ29uZmlnIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsImJ1dHRvbkVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJjYXJkTW9kYWxTYXZlIiwiY2FyZFRpdGxlIiwiY2FyZFVybCIsImFkZENhcmQiLCJoYW5kbGVNb2RhbENsb3NlIiwiaW5pdGlhbENhcmRzIiwiY2FyZCIsInZhbGlkUHJvZmlsZUZvcm0iLCJwcm9maWxlTW9kYWxGb3JtIiwiY2FyZE1vZGFsRm9ybSIsImVuYWJsZVZhbGlkYXRpb24iLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==